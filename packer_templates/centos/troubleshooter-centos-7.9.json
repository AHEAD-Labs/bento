{
  "builders": [
    {
      "type": "null",
      "communicator": "none"
    }
  ],
  "post-processors": [
    [
      {
        "type": "artifice",
        "files": [
          "{{ user `build_directory` }}/packer-{{user `template`}}-vmware/*"
        ]
      },
      {
        "type": "vsphere",
        "host": "{{ user `vsphere_host` }}",
        "cluster": "{{ user `vsphere_cluster` }}",
        "vm_name": "{{ user `template` }}",
        "datacenter": "{{ user `vsphere_data_center_name` }}",
        "datastore": "{{ user `vsphere_data_store_name` }}",
        "username": "{{ user `vsphere_userid` }}",
        "password": "{{ user `vsphere_password` }}",
        "insecure": "{{ user `vsphere_insecure` }}",
        "vm_network": "{{ user `vsphere_network_name` }}",
        "vm_folder": "{{ user `vsphere_folder` }}",
        "keep_input_artifact": true,
        "options": 
          [
          "--I:datastorePath",
          "--X:logLevel=verbose",
          "--X:logFile=/tmp/ovflogfile.log",
          "--X:logToConsole"
          ]
      },
      {
        "type": "vsphere-template",
        "host": "{{ user `vsphere_host` }}",
        "datacenter": "{{ user `vsphere_data_center_name` }}",
        "insecure": "{{ user `vsphere_insecure` }}",
        "username": "{{ user `vsphere_userid` }}",
        "password": "{{ user `vsphere_password` }}",
        "keep_input_artifact": true,
        "reregister_vm": false
      }
    ]
  ],
  "provisioners": [
  ],
  "variables": {
    "box_basename": "centos-7.9",
    "build_directory": "../../builds",
    "build_timestamp": "{{isotime \"20060102150405\"}}",
    "cpus": "1",
    "disk_size": "65536",
    "git_revision": "__unknown_git_revision__",
    "guest_additions_url": "",
    "headless": "",
    "http_directory": "{{template_dir}}/http",
    "http_proxy": "{{env `http_proxy`}}",
    "https_proxy": "{{env `https_proxy`}}",
    "hyperv_generation": "1",
    "hyperv_switch": "{{env `hyperv_switch`}}",
    "iso_checksum": "07b94e6b1a0b0260b94c83d6bb76b26bf7a310dc78d7a9c7432809fb9bc6194a",
    "iso_name": "CentOS-7-x86_64-Minimal-2009.iso",
    "ks_path": "7/ks.cfg",
    "memory": "1024",
    "mirror": "http://mirrors.kernel.org/centos",
    "mirror_directory": "7.9.2009/isos/x86_64",
    "name": "centos-7.9",
    "no_proxy": "{{env `no_proxy`}}",
    "template": "centos-7.9-x86_64",
    "version": "TIMESTAMP",
    "vsphere_host": "{{env `VSPHERE_HOST`}}",
    "vshpere_enabled": "{{env `VSPHERE_ENABLED`}}",
    "vsphere_userid": "{{env `VSPHERE_USERID`}}",
    "vsphere_password": "{{env `VSPHERE_PASSWORD`}}",
    "vsphere_guest_name": "{{env `VSPHERE_GUEST_NAME`}}",
    "vsphere_insecure": "{{env `VSPHERE_INSECURE`}}",
    "vsphere_resource_pool": "{{env `VSPHERE_RESOURCE_POOL`}}",
    "vsphere_compute_resource_name": "{{env `VSPHERE_COMPUTE_RESOURCE_NAME`}}",
    "vsphere_cluster": "{{ env `VSPHERE_CLUSTER` }}",
    "vsphere_data_store_name": "{{env `VSPHERE_DATA_STORE_NAME`}}",
    "vsphere_template_name": "{{env `VSPHERE_TEMPLATE_NAME`}}",
    "vsphere_data_center_name": "{{env `VSPHERE_DATA_CENTER`}}",
    "vsphere_network_name": "{{ env `VSPHERE_NETWORK_NAME` }}",
    "vsphere_folder": "{{ env `VSPHERE_FOLDER` }}"
  }
}
